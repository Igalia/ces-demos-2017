<!DOCTYPE html>
<html>
  <!--
      Copyright (C) 2016 Igalia S.L.

      This program is free software: you can redistribute it and/or modify
      it under the terms of the GNU General Public License as published by
      the Free Software Foundation, either version 2 of the License, or
      (at your option) any later version.

      This program is distributed in the hope that it will be useful,
      but WITHOUT ANY WARRANTY; without even the implied warranty of
      MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
      GNU General Public License for more details.

      You should have received a copy of the GNU General Public License
      along with this program.  If not, see <http://www.gnu.org/licenses/>.
    -->
  <head>
    <title>Chromium/Ozone/Wayland demos</title>
    <meta charset="utf-8"/>
    <style type="text/css">
      body {
        margin: 0;
      }
      iframe {
        display: block;
        border: none;
        height: 100vh;
        width: 100vw;
      }
    </style>
    <script type="text/javascript">
      var local = false;
      var urls = [
        { url: "https://www.youtube.com/embed/yRvwBmpAPpI?rel=0&controls=0&showinfo=0&autoplay=1&start=10", local: false },
        { url: "https://threejs.org/examples/webgl_animation_cloth.html", local: false },
        { url: "https://threejs.org/examples/webgl_animation_skinning_morph.html", local: false },
        { url: "https://threejs.org/examples/webgl_buffergeometry_instancing_billboards.html", local: false },
        { url: "https://threejs.org/examples/webgl_camera.html", local: true },
        { url: "https://threejs.org/examples/webgl_effects_anaglyph.html", local: false },
        { url: "https://threejs.org/examples/webgl_effects_parallaxbarrier.html", local: false },
        { url: "https://threejs.org/examples/webgl_effects_stereo.html", local: false },
        { url: "https://threejs.org/examples/webgl_geometries.html", local: false },
        { url: "https://threejs.org/examples/webgl_geometries2.html", local: false },
        { url: "https://threejs.org/examples/webgl_geometry_colors_blender.html", local: false },
        { url: "https://threejs.org/examples/webgl_geometry_colors_blender.html", local: false },
        { url: "https://threejs.org/examples/webgl_geometry_convex.html", local: false },
        { url: "https://threejs.org/examples/webgl_geometry_cube.html", local: false },
        { url: "https://www.youtube.com/embed/yRvwBmpAPpI?rel=0&controls=0&showinfo=0&autoplay=1&start=70", local: false },
        { url: "https://threejs.org/examples/webgl_geometry_hierarchy.html", local: true },
        { url: "https://threejs.org/examples/webgl_geometry_hierarchy2.html", local: true },
        { url: "https://threejs.org/examples/webgl_gpgpu_birds.html", local: true },
        { url: "https://threejs.org/examples/webgl_gpgpu_protoplanet.html", local: true },
        { url: "https://threejs.org/examples/webgl_gpgpu_water.html", local: true },
        { url: "https://threejs.org/examples/webgl_helpers.html", local: false },
        { url: "https://threejs.org/examples/webgl_interactive_buffergeometry.html", local: true },
        { url: "https://threejs.org/examples/webgl_interactive_lines.html", local: true },
        { url: "https://threejs.org/examples/webgl_interactive_points.html", local: false },
        { url: "https://threejs.org/examples/webgl_interactive_raycasting_points.html", local: true },
        { url: "https://threejs.org/examples/webgl_kinect.html", local: false },
        { url: "https://threejs.org/examples/webgl_lights_pointlights2.html", local: false },
        { url: "https://www.youtube.com/embed/yRvwBmpAPpI?rel=0&controls=0&showinfo=0&autoplay=1&start=130", local: false },
        { url: "https://threejs.org/examples/webgl_lines_colors.html", local: true },
        { url: "https://threejs.org/examples/webgl_lines_cubes.html", local: true },
        { url: "https://threejs.org/examples/webgl_lines_sphere.html", local: true },
        { url: "https://threejs.org/examples/webgl_lines_splines.html", local: true },
        { url: "https://threejs.org/examples/webgl_loader_assimp2json.html", local: false },
        { url: "https://threejs.org/examples/webgl_loader_awd.html", local: false },
        { url: "https://threejs.org/examples/webgl_loader_bvh.html", local: false },
        { url: "https://threejs.org/examples/webgl_loader_collada_keyframe.html", local: false },
        { url: "https://threejs.org/examples/webgl_loader_collada_kinematics.html", local: false },
        { url: "https://threejs.org/examples/webgl_loader_collada_skinning.html", local: false },
        { url: "https://threejs.org/examples/webgl_loader_fbx.html", local: false },
        { url: "https://threejs.org/examples/webgl_loader_pdb.html", local: false },
        { url: "https://threejs.org/examples/webgl_loader_ply.html", local: false },
        { url: "https://www.youtube.com/embed/WTddt5ZjKRE?rel=0&controls=0&showinfo=0&autoplay=1&start=10", local: false },
        { url: "https://threejs.org/examples/webgl_loader_sea3d.html", local: false },
        { url: "https://threejs.org/examples/webgl_marchingcubes.html", local: false },
        { url: "https://threejs.org/examples/webgl_materials.html", local: true },
        { url: "https://threejs.org/examples/webgl_materials_grass.html", local: true },
        { url: "https://threejs.org/examples/webgl_materials_reflectivity.html", local: false },
        { url: "https://threejs.org/examples/webgl_materials_shaders_fresnel.html", local: false },
        { url: "https://threejs.org/examples/webgl_materials_wireframe.html", local: true },
        { url: "https://threejs.org/examples/webgl_mirror.html", local: true },
        { url: "https://threejs.org/examples/webgl_mirror_nodes.html", local: false },
        { url: "https://threejs.org/examples/webgl_modifier_simplifier.html", local: false },
        { url: "https://threejs.org/examples/webgl_morphnormals.html", local: false },
        { url: "https://threejs.org/examples/webgl_morphtargets_horse.html", local: false },
        { url: "https://threejs.org/examples/webgl_multiple_elements.html", local: true },
        { url: "https://www.youtube.com/embed/WTddt5ZjKRE?rel=0&controls=0&showinfo=0&autoplay=1&start=70", local: false },
        { url: "https://threejs.org/examples/webgl_multiple_renderers.html", local: true },
        { url: "https://threejs.org/examples/webgl_octree.html", local: true },
        { url: "https://threejs.org/examples/webgl_panorama_equirectangular.html", local: false },
        { url: "https://threejs.org/examples/webgl_points_random.html", local: true },
        { url: "https://threejs.org/examples/webgl_points_sprites.html", local: false },
        { url: "https://threejs.org/examples/webgl_postprocessing.html", local: true },
        { url: "https://threejs.org/examples/webgl_postprocessing_crossfade.html", local: true },
        { url: "https://threejs.org/examples/webgl_postprocessing_masking.html", local: false },
        { url: "https://threejs.org/examples/webgl_postprocessing_nodes.html", local: false },
        { url: "https://threejs.org/examples/webgl_shader.html", local: true },
        { url: "https://threejs.org/examples/webgl_shader_lava.html", local: false },
        { url: "https://threejs.org/examples/webgl_shadowmesh.html", local: true },
        { url: "https://threejs.org/examples/webgl_sprites.html", local: false },
        { url: "https://threejs.org/examples/webgl_terrain_dynamic.html", local: false },
      ];
      var duration = 60;
      var index = Math.floor(Math.random() * urls.length);
      var increment = +1;

      var timeoutID;
      function nextDemo() {
        window.clearTimeout(timeoutID);
        index = (index + urls.length + increment) % urls.length;
        var url = urls[index].url;
        if (local) {
          // We only use local threejs fallback and skip youtube videos.
          if (urls[index].local) {
            url = url.replace("https://threejs.org/", "./three.js/");
          } else {
            nextDemo();
            return;
          }
        }
        document.getElementById("iframe").src = url;
        timeoutID = window.setTimeout(nextDemo, 1000 * duration);
      }

      window.addEventListener("load", function() {
        var query = {};
        var a = location.search.substr(1).split('&');
        for (var i = 0; i < a.length; i++) {
          var b = a[i].split('=');
          query[decodeURIComponent(b[0])] = decodeURIComponent(b[1] || '');
        }
        local = query.local;

        document.getElementById("nextArrow").addEventListener("click", function() { increment = +1; nextDemo(); });
        document.getElementById("previousArrow").addEventListener("click", function() { increment = -1; nextDemo(); });
        nextDemo();
      });
    </script>
  </head>
  <body>
    <iframe id="iframe"></iframe>
    <!-- Quick hack to provide forward/backward buttons... -->
    <div id="previousArrow" style="position: absolute; left: 5px; top: 25vh; height: 50px; width: 30px; opacity: .5"><svg width="50px" height="50px"><path d="M 30 0 L 0 25 L 30 50 z" fill="blue"></svg></div>
    <div id="nextArrow" style="position: absolute; left: 5px; top: 75vh; height: 50px; width: 30px; opacity: .5"><svg width="50px" height="50px"><path d="M 0 0 L 30 25 L 0 50 z" fill="blue"></svg></div>
  </body>
</html>
